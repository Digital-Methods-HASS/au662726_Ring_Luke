---
title: "Navigating the Storm: A Data-Driven Approach to Reducing the Impact of Natural Disasters"
keywords: 
    - Sonification
    - Motion Capture
    - Realtime
    - Processing
authors:
- name: Luke Ring
  affiliation: 1
  student_id: 202009983
  initials: LR
  citation: "Ring, L."
affiliations:
- name: Aarhus University
  index: 1
abstract: ".."
date: "12 January 2023"
submitted: "12 January 2023"
degree: "BSc Cognitive Science"
supervisor: "Adela Sobotkova"
faculty: "Faculty of Arts"
university: "Aarhus University"
course: "Cultural Data Science (147201E001)"
year: 2023
bibliography:
    - master.bib
    - packages.bib
biblio-title: References
biblio-style: apa
link-citations: true
colorlinks: true
urlcolor: NavyBlue
linkcolor: Mulberry
citecolor: BrickRed
toccolor: Black
# geometry: margin=2.5cm
mainfont: georgia
sansfont: "Calibri"
monofont: "Hack Nerd Font"
fontsize: 11pt
spacing: double
# set this to false when the document is ready for submission
draft: true
# set this to false if the last page or refs look bad
aligncols: true
output:
    bookdown::pdf_document2:
        keep_tex: yes
        extra_dependencies: ["flafter", "biblatex"]
        latex_engine: xelatex 
        citation_package: biblatex
        toc: no
        number_sections: yes
        fig_caption: yes
        template: templates/latex_template.tex
csl: templates/apa7.csl
repository: https\://github.com/Digital-Methods-HASS/au662726_Ring_Luke/tree/main/exam
licensepath: https\://github.com/Digital-Methods-HASS/au662726_Ring_Luke/tree/main/exam/LICENSE.md
---

```{r setup, include=FALSE}
cache_dir <- "./.cache"
data_dir <- "./data/processed"
data_file <- "disasters_since_1960.rds"
main_dir <- "exam"

# set working directory if it isn't the directory of this file
wd <- getwd()
wd_parent <- dirname(wd)
if (basename(wd) != main_dir) {
    wd_parent <- wd
    wd <- paste0(wd, "/", main_dir)
    setwd(wd)
}

options(knitr.graphics.auto_pdf = TRUE)
options(knitr.table.format = "latex")
knitr::opts_knit$set(root.dir = wd)
knitr::opts_chunk$set(echo = FALSE)
# this leaves all of the intermediate files in the dir if FALSE
options(tinytex.clean = FALSE)
# make verbose TRUE to help with debugging
options(tinytex.verbose = FALSE)

# set default cran mirror
r <- getOption("repos")
r["CRAN"] <- "https://mirrors.dotsrc.org/cran/" # Denmark
options(repos = r)
rm(r)

# use this function to load packages to save manual installation
use_package <- function(p) {
    if (!is.element(p, installed.packages()[, 1]))
        install.packages(p, dep = TRUE)
        if (p == "easystats")
            easystats::install_suggested()
    require(p, character.only = TRUE)
}
# add required packages
use_package("kableExtra")
use_package("bookdown")
use_package("rticles")
use_package("tidyverse")
use_package("easystats")
use_package("ggprism")
# use_package("ggbreak")
use_package("conflicted")
use_package("colorspace")
use_package("lme4")
use_package("lmerTest")

# define base palette
colorblind_friendly_pal <- c("#0074e7", "#e7298a", "#8bcf00")
# darker version
colorblind_friendly_pal_dark <- darken(colorblind_friendly_pal, 0.5)
# make it slightly less intense
colorblind_friendly_pal <- lighten(colorblind_friendly_pal, 0.25)
options(ggplot2.discrete.colour=colorblind_friendly_pal)
options(ggplot2.discrete.fill=colorblind_friendly_pal)


# after all the packages are loaded, we can save
# a bibliography of all the packages used
# in case we need to cite them
knitr::write_bib(.packages(), "packages.bib")

```

# `r rmarkdown::metadata$title`


# Background


# Methods

```{r data}
disaster_events <- nrow(disasters)
# let's exlude disasters with insufficient data (< 100 occurrences of the disaster_type)
disasters <- disasters %>%
    group_by(disaster_type) %>%
    dplyr::filter(n() >= 100) %>% ungroup()

disaster_events_excluded <- disaster_events - nrow(disasters)

# now we need to remove unused levels from the disaster_type factor
disaster_types <- disasters %>%
    group_by(disaster_type) %>%
    summarise(deaths = sum(deaths, na.rm = TRUE)) %>%
    arrange(deaths) %>% pull(disaster_type)

# update the disaster_type factor
disasters$disaster_type <- factor(
    disasters$disaster_type,
    levels = disaster_types,
    ordered = FALSE)




```

# Results


# Discussion

```{r analysis}






m_edu_death <- lmerTest::lmer(deaths_pct ~ scale(edu_exp_pct_gdp) + (1 | disaster_type), data = disasters, na.action = na.exclude)
report(m_edu_death)


m_rural_affected <- lmerTest::lmer(affected_pct ~ scale(rural_population_pct) + (1 | disaster_type), data = disasters, na.action = na.exclude)
report(m_rural_affected)



```

<div id="refs"></div>

